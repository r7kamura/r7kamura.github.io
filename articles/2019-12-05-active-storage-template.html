<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width">
  <title>ActiveStorageの不具合報告をやりやすく</title>
  <link href="https://r7kamura.com/articles/2019-12-05-active-storage-template" rel="canonical">
  <link rel="stylesheet" href="/css/main.css">
  <link rel="search" type="application/opensearchdescription+xml" title="r7kamura.com" href="/opensearch.xml">
  <link rel="alternate" type="application/rss+xml" href="/feed.xml">
  
  <meta property="description" content="Add bug report templates for Active Storage by r7kamura · Pull Request #37888 · rails/rails 出したらmergeされたよって話。">
  <meta property="og:description" content="Add bug report templates for Active Storage by r7kamura · Pull Request #37888 · rails/rails 出したらmergeされたよって話。">
  
  <meta property="og:type" content="website">
  <meta property="og:title" content="ActiveStorageの不具合報告をやりやすく">
  <meta property="og:url" content="https://r7kamura.com/articles/2019-12-05-active-storage-template">
  
  <meta property="og:image" content="https://r7kamura.com/default_og_image.jpg">
  <meta property="twitter:card" content="summary">
  
</head>
<body>
  <header>
    <nav>
      <a href="/">r7kamura.com</a>
      <ul>
        <li>
          <a href="/articles">一覧</a>
        </li>
        <li>
          <a href="https://www.google.com/search?q=site:r7kamura.com">検索</a>
        </li>
      </ul>
    </nav>
  </header>
  <main>
    <article>
  <header>
    <time datetime="2019-12-05T00:00:00+09:00">2019年12月05日</time>
    <h1>ActiveStorageの不具合報告をやりやすく</h1>
  </header>
  <div>
    <p><a href="https://github.com/rails/rails/pull/37888">Add bug report templates for Active Storage by r7kamura · Pull Request #37888 · rails/rails</a> 出したらmergeされたよって話。</p>

<h2>スポンサーで浮かれてOSSをやる</h2>

<p>GitHubスポンサーの審査を通過した旨をTwitterでつぶやいたところ、何人かにすぐにスポンサーになってもらえてモチベートされたので、Railsで最近気になっていたところについてPull Requestを送ってみることにした。</p>

<p><a href="https://github.com/sponsors/r7kamura">https://github.com/sponsors/r7kamura</a></p>

<p>気になっていたところというのは、ActiveStorageについて。仕事ではよくRailsのアップグレードを請け負っていて、いろんな会社のRailsアプリをRails 6にしているのだけど、「ActiveStorage 5だと動くのに6だと動かない！」という問題にあたることが多くて、最近はActiveStorageにIssueを出す作業を<a href="https://github.com/rails/rails/issues/37836">やっていた</a>。</p>

<h2>ActiveStorageの既存Issueを眺める</h2>

<p>過去のActiveStorageに関するIssueを読んでみると、丁寧な人は問題を再現させるための専用のサンプルRailsアプリをPublicリポジトリに用意して、そのURLを貼ったりしている。でも大半の人は、自分のアプリから抜き出してきたコード片を貼り付けているだけだったりして、これだと直す側も直しづらいし微妙だなとは思っていた。</p>

<p>しかし、そのためだけにサンプルのRailsアプリを用意するのが面倒だという気持ちは理解できて、実際自分もIssueを出すにあたって、Railsアプリをつくるのを少し躊躇した。</p>

<p>rails/railsリポジトリには、不具合報告用に、1ファイルで実行可能なテストのテンプレートが<a href="https://github.com/rails/rails/tree/v6.0.1/guides/bug_report_templates">用意されている</a>。ActiveRecord用、ActiveJob用、ActionController用などがあるのだけど、ActiveStorage用のものはこれまで存在していなかった。</p>

<h2>不具合報告用テンプレートを用意する</h2>

<p>それで今回少し時間をとって、汎用的に使えるテンプレートをつくり、冒頭に挙げたPull Requestを出してみた。すぐにmergeされたので、masterブランチでは既に見られるようになっています。<a href="https://guides.rubyonrails.org/contributing_to_ruby_on_rails.html">Railsガイド</a>にもこのテンプレートに対してリンクを用意していて、<a href="https://edgeguides.rubyonrails.org/contributing_to_ruby_on_rails.html">edge版のRailsガイド</a>では既に反映されているけど、本家Railsガイドのほうには現時点ではまだ反映されていないので注意。</p>

<p>これでIssueの品質が良くなって、ActiveStorageの開発が捗るようになってほしい。</p>

  </div>
</article>

  </main>
</body>
</html>
