<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width">
  <title>ブラウザのテキストフィールドで好きなエディタを使う</title>
  <link href="https://r7kamura.com/articles/2011-12-15-h" rel="canonical">
  <link rel="stylesheet" href="/css/main.css">
  <link rel="search" type="application/opensearchdescription+xml" title="r7kamura.com" href="/opensearch.xml">
  <link rel="alternate" type="application/rss+xml" href="/feed.xml">
  
  <meta property="description" content="ブログとかで長文を書くとき、どうしてますか。">
  <meta property="og:description" content="ブログとかで長文を書くとき、どうしてますか。">
  
  <meta property="og:type" content="website">
  <meta property="og:title" content="ブラウザのテキストフィールドで好きなエディタを使う">
  <meta property="og:url" content="https://r7kamura.com/articles/2011-12-15-h">
  
  <meta property="og:image" content="http://dl.dropbox.com/u/5978869/image/20111215_082657.png">
  <meta property="twitter:card" content="summary_large_image">
  
</head>
<body>
  <header>
    <nav>
      <a href="/">r7kamura.com</a>
      <ul>
        <li>
          <a href="/links">リンク集</a>
        </li>
        <li>
          <a href="https://www.google.com/search?q=site:r7kamura.com">検索</a>
        </li>
      </ul>
    </nav>
  </header>
  <main>
    <article>
  <header>
    <time datetime="2011-12-15T00:00:00+00:00">2011年12月15日</time>
    <h1>ブラウザのテキストフィールドで好きなエディタを使う</h1>
  </header>
  <div>
    <p>ブログとかで長文を書くとき、どうしてますか。<br>
大抵の人はそのままテキストフィールドに文章を入力していると思います。しかしこのブログを見ているような人達のことを考えると、「テキストフィールドでブログ書くやつは情弱」とか言い出してエディタを開き始めてもおかしくない。この前後ろから忍び寄ってこっそり見てたらエディタ開いてブログ書いてた人いたから間違いない。普段vimやemacsを使っているという人は特に、キーバインドが気になるからいつものエディタで書きたいと思う。でもわざわざエディタ開いて文章書いてコピーしてブラウザに戻ってペーストしてって言うのが面倒だしかっこ良くない。</p>

<h3>それ拡張で</h3>

<p>GoogleChromeのテキストフィールドでこれをやるには、<a href="https://chrome.google.com/webstore/detail/ljobjlafonikaiipfkggjbhkghgicgoh">Edit with Emacs</a>という拡張を使う。Emacsって名前に書いてあるけどEmacsは関係ない。Edit with Emacsは、テキストフィールドでAlt+Enter(デフォルトではこのキーショートカットは無効になってるので有効化する)を押すと、サーバにPOSTで通信が送られて、サーバがエディタを開いて、エディタを閉じるとサーバが内容をブラウザに返して、返ってきた値をEdit with Emacsがテキストフィールドに挿入するという仕組み。</p>

<p><a href="http://dl.dropbox.com/u/5978869/image/20111215_082657.png" target="_blank"><img src="http://dl.dropbox.com/u/5978869/image/20111215_082657.png" alt=""></a></p>

<p>サーバは自分で用意する必要がある。<a href="https://github.com/kayakaya/edit_server_rack">edit_server_rack</a>というRackで実装されたサーバがあるので、これを利用する。config.ruの5行目でEmacsを利用するようになってるので、ENV['EDITOR']とか'vim'とかに上書きする。書き換えたらrackupで起動する。rackを利用しているから事前にgem install rackが必要かもしれない。screenとかでバックグラウンドで適当に動かすと良さそう。これで、ブラウザのテキストフィールドで好きなエディタが使えるようになる。</p>

<h3>それ他のエディタで</h3>

<p>MacVim-Kaoriya版を使ってる人は、<a href="http://repo.or.cz/w/MacVim/KaoriYa.git/blob_plain/HEAD:/src/MacVim/mvim">ここ</a>からmvimというスクリプトをダウンロードして、パスの通るところにおいて'mvim -f'を設定すると良い。gitとかでMacVimを使う方法を参考にした。TextMateを使ってる人はmateっていうコマンドが付属していると思うから、mateにパス通して'mate -w'を設定すると良い。<a href="#fn1" title="但し少しサーバの実装が変で、edit\_server.rbのsystem関数の部分を書き替えないと上手く動かない。困ったらコメントしてもらえると一緒に考えられる">*1</a>それ以外のエディタでも、コマンドで外部から良い感じに呼び出せる奴だと上手くいきそう。「git ◯◯ 使う」とかでググるんや。</p>

<h3>それ他のブラウザで</h3>

<p>SafariだとCocoaとテキストフィールドを連携させる仕組みがあるので、エディタ側が対応していれば何の拡張も要らない。TextMateとかは「Safariだとその場でTextMate呼び出せるよ！」って謳っている。Safariで色々やりたい人はQuickCursorってアプリを調べてみると良い。Firefoxだと<a href="https://addons.mozilla.org/ja/firefox/addon/its-all-text/">It's All Text!</a>っていうAdd-onがあるのでそれを使うと良い。但しEdit with Emacsと違って少し重い。Firefoxは2年前に使ってたわ。</p>

<h3>まとめ</h3>

<p>導入方法まとめです。</p>

<pre><code># 1. Chrome拡張のEdit with Emacsを入れる # 2. 拡張の設定でキーボードショートカットを有効化する # 3. サーバを入れて動かす $ git clone https://github.com/kayakaya/edit\_server\_rack.git $ cd edit\_server\_rack $ vim config.ru $ gem install rack $ rackup # 4. おもむろにはてなブログのテキストフィールドを開いてAlt+Enterを押す # 5. エディタが開くので適当に文章を入力して保存して閉じる # 6. ブラウザに戻るとテキストフィールドに文章が挿入されている # 7. Happy Blogging with your favorite Editor!
</code></pre>

  </div>
</article>

  </main>
</body>
</html>
