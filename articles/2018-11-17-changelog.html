<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width">
  <title>CHANGELOGの話</title>
  <link href="https://r7kamura.com/articles/2018-11-17-changelog" rel="canonical">
  <link rel="stylesheet" href="/css/main.css">
  <link rel="search" type="application/opensearchdescription+xml" title="r7kamura.com" href="/opensearch.xml">
  <link rel="alternate" type="application/rss+xml" href="/feed.xml">
  
  <meta property="description" content="最近は keepachangelog を参考に変更履歴を書いているという話です。">
  <meta property="og:description" content="最近は keepachangelog を参考に変更履歴を書いているという話です。">
  
  <meta property="og:type" content="website">
  <meta property="og:title" content="CHANGELOGの話">
  <meta property="og:url" content="https://r7kamura.com/articles/2018-11-17-changelog">
  
  <meta property="og:image" content="https://r7kamura.com/default_og_image.jpg">
  <meta property="twitter:card" content="summary">
  
</head>
<body>
  <header>
    <nav>
      <a href="/">r7kamura.com</a>
      <ul>
        <li>
          <a href="/articles">一覧</a>
        </li>
        <li>
          <a href="https://www.google.com/search?q=site:r7kamura.com">検索</a>
        </li>
      </ul>
    </nav>
  </header>
  <main>
    <article>
  <header>
    <time datetime="2018-11-17T00:00:00+09:00">2018年11月17日</time>
    <h1>CHANGELOGの話</h1>
  </header>
  <div>
    <p>最近は keepachangelog を参考に変更履歴を書いているという話です。</p>

<h2>Keep a Changelog</h2>

<p>keepachangelog.com という、Changelog (※Changelog や CHANGELOG など色々な表記方法がありますが、以下ではこの表記で通します) を書くためのガイドラインなどを提唱している Web サイトがあります。推奨する Changelog の雛形だけではなく、Changelog とはどういうものか、なぜ必要なのか、「良い Changelog」や「悪い Changelog」とはどういうものなのか、ということを分かりやすく説明してくれていています。そのため、Changelog を書いてもらいたいときに参照できる情報源としても非常に重宝しています。</p>

<p>内容については元の文章を読んでもらったほうがわかりやすいと思うので、Keep a Changelog の内容を読んでください。以降では、自分が中でも大事だなと思ったところについて紹介しながら、自分の意見を添えておこうと思います。</p>

<h2>バージョニングルールへの言及</h2>

<p>原文では「セマンティックバージョニングに従っていることに言及しておく」という感じの内容ですが、それに従っていないとしても、どういうルールでバージョンを変えているかに言及しておくことは重要だと思います。</p>

<p>自分の場合、なんとなくセマンティックバージョニングに従っているつもりでリリースを重ねていることも多かったんですが、「セマンティックバージョニングに従っています」と明言することで背筋も伸びるし、意図せず変なバージョンを切ってしまうことが減ったかなと思ってます。バージョン変更時には Changelog ファイルを編集することになるので、そこにバージョニングのルールが書かれていると丁度良いと思います。</p>

<h2>リリース日の併記</h2>

<p>利用者として「1つ前のバージョンがリリースされたのが3年前か...」「先週新しいバージョンがリリースされたばかりなのか」という情報が開発の助けになることが多いので、バージョンごとのリリース日が分かりやすく書いてあると嬉しいなと思い、最近では自分も書くようにしています。</p>

<p>例えば GitHub でリリースごとにタグを切ってバージョンを管理していれば、GitHub の releases のページで調べることも可能なんですが、今のところそこまで一覧性が良いわけではないし、ホスティングしているサービスごとに調べ方が違うという点でも少し困ります。例えば Bitbucket にコードをホスティングしているとか、ホスティングは GitHub で行っているけれど Git のタグでは管理しておらず、パッケージのホスティングサイトの方だけでバージョンを管理しているとか。</p>

<p>個人的に Changelog は、機械ではなく人間のために、ある程度冗長になることを許容しながらも情報をまとめておくためのキュレーションサービスだと思っているので、Changelog にリリース日を書いておくというのは、作業コストの低さに比べて見返りの大きい良い活動だと思っています。</p>

<h2>変更内容を種類で分類</h2>

<p>Keep a Changelog では、以下の6つの種類のいずれかに変更内容を分類して記述したほうが良いとしているようです。</p>

<ul>
<li>Added</li>
<li>Changed</li>
<li>Deprecated</li>
<li>Fixed</li>
<li>Removed</li>
<li>Security</li>
</ul>

<p>辞書順で列挙しています。自分の仕事では Web アプリケーションで使っているライブラリのバージョンアップ作業を担当することが多いんですが、この作業の中では、依存している様々なライブラリのバージョン変更をひとつずつ確認するという工程が必要になります。その中で Changelog から「あ、ここでは不具合修正しか行われていないんだ」「ここでは変更が加わったんだ」というようなセマンティックバージョニングから得られる以上の情報が簡単に得られると非常に捗るので、この分類は非常に有用だと思っています。好き勝手に分類をつくっていくと分かりづらくなっていくと思うので、予め決められた分類しか使わないということも地味に大事そうな気がしています。</p>

<h2>未リリースの変更内容</h2>

<p>開発者としてもリリース作業が楽になるし、利用者としても予定が立てやすいので、次のリリースに含める予定の変更内容を含めるセクションがあると良い、という話がありました。確かにその通りで、リリースするタイミングで前回のバージョンからの変更点を振り返って情報を集める作業は大変だし、Pull Request を送って変更する人の方が変更内容の適切な表現方法を知っている可能性が高いので、個々の変更のたびに都度 Changelog に追記していけると理想的だと思います。</p>

<h2>おわり</h2>

<p>Keep a Changelog の話については以上です。完全にこのガイドラインに従うべきだとまでは思いませんが、書き方のガイドラインのひとつとして知っておくと、便利に使える機会が多いと思います。</p>

<h2>余談1: UPPER CASE</h2>

<p>自分が README や NEWS, INSTALL, HACKING などのファイル名に大文字を使う理由を知ったのは、2009年頃にプログラミングを始め、初めて GitHub を利用したときのことだったと思います。それまではなんとなくそういう慣習があるんだなあという気持ちでいましたが、自分がそれを書く立場になったことで初めて疑問を持つことになりました。昔は日本語だと「れあどめ.txt」のようなかわいい名前のファイルが含まれていることも結構ありましたが、今でも Vector とか探せばまだそういう文化圏が生き残っているんでしょうか。</p>

<p>これから知る方は、<a href="https://softwareengineering.stackexchange.com/questions/301691/readme-txt-vs-readme-txt">この StackOverflow の質問</a> などを参考にしてください。</p>

<h2>余談2: ブログに書くか Patreon に書くか</h2>

<p>この Patreon は今のところ、Twitter と Medium との間を補完する、フロー的な技術記録を残しておく場所として利用しています。この記事の内容は幾らか汎用性がある気がしたので、Medium のブログに投稿しても良い内容かなと思うところも少しあったんですが、この記事をブックマークしてもらうぐらいなら keepachangelog.com をブックマークしてもらえれば十分だし、この記事はそこに誘導するための情報なので、ストック情報寄りではなく、あまり多くの被リンクを持つべきページではないと考え、Patreon に投稿しておくことにしました。</p>

  </div>
</article>

  </main>
</body>
</html>
